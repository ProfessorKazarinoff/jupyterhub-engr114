



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.6">
    
    
      
        <title>DO server - ENGR114-JupyterHub-Deployment</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#ff7043">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../static/css/toc.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#set-up-digital-ocean-server" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="ENGR114-JupyterHub-Deployment" class="md-header-nav__button md-logo">
          
            <i class="md-icon">build</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ENGR114-JupyterHub-Deployment
              </span>
              <span class="md-header-nav__topic">
                DO server
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/ProfessorKazarinoff/jupyterhub-engr114/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="ENGR114-JupyterHub-Deployment" class="md-nav__button md-logo">
      
        <i class="md-icon">build</i>
      
    </a>
    ENGR114-JupyterHub-Deployment
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/ProfessorKazarinoff/jupyterhub-engr114/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../setup/" title="Set Up" class="md-nav__link">
      Set Up
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        DO server
      </label>
    
    <a href="./" title="DO server" class="md-nav__link md-nav__link--active">
      DO server
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Page Contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-new-digital-ocean-droplet" title="Create a new Digital Ocean Droplet" class="md-nav__link">
    Create a new Digital Ocean Droplet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-an-ssh-key" title="Add an SSH Key" class="md-nav__link">
    Add an SSH Key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#log-into-the-server-as-root-over-ssh-using-putty" title="Log into the server as root over SSH using PuTTY." class="md-nav__link">
    Log into the server as root over SSH using PuTTY.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-non-root-sudo-user" title="Create a non-root sudo user" class="md-nav__link">
    Create a non-root sudo user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ssh-keys-to-new-users-profile" title="Add SSH keys to new user's profile" class="md-nav__link">
    Add SSH keys to new user's profile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connect-to-the-server-as-the-non-root-sudo-user-using-putty" title="Connect to the server as the non-root sudo user using PuTTY" class="md-nav__link">
    Connect to the server as the non-root sudo user using PuTTY
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" title="Next Steps" class="md-nav__link">
    Next Steps
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../install_jupyterhub/" title="Install JupyterHub" class="md-nav__link">
      Install JupyterHub
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../DNS/" title="DNS Routing" class="md-nav__link">
      DNS Routing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ssl/" title="SSL Certificates" class="md-nav__link">
      SSL Certificates
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cookie_secret_proxy_auth_token/" title="Cookie Secret and Proxy Auth Token" class="md-nav__link">
      Cookie Secret and Proxy Auth Token
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../nginx_install/" title="Install Nginx" class="md-nav__link">
      Install Nginx
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../nginx_config/" title="Nginx Configuration" class="md-nav__link">
      Nginx Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../jupyterhub_config/" title="JupyterHub Configuration" class="md-nav__link">
      JupyterHub Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../systemd/" title="System Service" class="md-nav__link">
      System Service
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../github_oauth/" title="GitHub OAuth" class="md-nav__link">
      GitHub OAuth
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../google_oauth/" title="Google OAuth" class="md-nav__link">
      Google OAuth
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../jupyterlab_default/" title="JupyterLab Default Interface" class="md-nav__link">
      JupyterLab Default Interface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../login_page/" title="Custom Login Page" class="md-nav__link">
      Custom Login Page
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../github_assignments/" title="Assignments from GitHub" class="md-nav__link">
      Assignments from GitHub
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../useful_commands/" title="Usefull Commands" class="md-nav__link">
      Usefull Commands
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Page Contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-new-digital-ocean-droplet" title="Create a new Digital Ocean Droplet" class="md-nav__link">
    Create a new Digital Ocean Droplet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-an-ssh-key" title="Add an SSH Key" class="md-nav__link">
    Add an SSH Key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#log-into-the-server-as-root-over-ssh-using-putty" title="Log into the server as root over SSH using PuTTY." class="md-nav__link">
    Log into the server as root over SSH using PuTTY.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-non-root-sudo-user" title="Create a non-root sudo user" class="md-nav__link">
    Create a non-root sudo user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ssh-keys-to-new-users-profile" title="Add SSH keys to new user's profile" class="md-nav__link">
    Add SSH keys to new user's profile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connect-to-the-server-as-the-non-root-sudo-user-using-putty" title="Connect to the server as the non-root sudo user using PuTTY" class="md-nav__link">
    Connect to the server as the non-root sudo user using PuTTY
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" title="Next Steps" class="md-nav__link">
    Next Steps
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ProfessorKazarinoff/jupyterhub-engr114/edit/master/docs/doserver.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="set-up-digital-ocean-server">Set Up Digital Ocean Server</h1>
<p>To start the JupyterHub deployment process, we need to set up an Ubuntu 18.04 Server hosted by a cloud provider.</p>
<div class="toc">
<ul>
<li><a href="#set-up-digital-ocean-server">Set Up Digital Ocean Server</a><ul>
<li><a href="#create-a-new-digital-ocean-droplet">Create a new Digital Ocean Droplet</a></li>
<li><a href="#add-an-ssh-key">Add an SSH Key</a></li>
<li><a href="#log-into-the-server-as-root-over-ssh-using-putty">Log into the server as root over SSH using PuTTY.</a></li>
<li><a href="#create-a-non-root-sudo-user">Create a non-root sudo user</a></li>
<li><a href="#add-ssh-keys-to-new-users-profile">Add SSH keys to new user's profile</a></li>
<li><a href="#connect-to-the-server-as-the-non-root-sudo-user-using-putty">Connect to the server as the non-root sudo user using PuTTY</a></li>
<li><a href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</div>
<p>Digital Ocean is a cloud service provider like Amazon Web Services (AWS), Google Cloud, Microsoft Azure and Linode. Digital Ocean provides virtual private servers (called <em>droplets</em> in Digital Ocean-speak) and online storage of static files (called <em>spaces</em> in Digital Ocean-speak). </p>
<p>We are going to run the JupyterHub server on a Digital Ocean <em>droplet</em>. I like Digital Ocean's prices and web interface. The documentation on Digital Ocean is pretty good too. I already have a Digital Ocean account. I don't remember exactly how I did it, but going to this link:</p>
<p><a href="https://www.digitalocean.com/">https://www.digitalocean.com/</a></p>
<p>and selecting [Create Account --&gt;] should work.</p>
<h2 id="create-a-new-digital-ocean-droplet">Create a new Digital Ocean Droplet</h2>
<p>To create a new Digtial Ocean Droplet (a new server), log in here:</p>
<p><a href="https://cloud.digitalocean.com/login">https://cloud.digitalocean.com/login</a></p>
<p><img alt="Digital Ocean Login" src="../images/digital_ocean_login.png" /></p>
<p>After logging in, I got a verify screen and had to go to my email and retrive a six digit code. Ah... the joys of two-factor authentication.</p>
<p><img alt="Digital Ocean Verify" src="../images/digital_ocean_verify.png" /></p>
<p>The welcome screen looks like this. To create a new server, select [Create Droplet]</p>
<p><img alt="Digital Ocean Create Droplet" src="../images/digital_ocean_create_droplet.png" /></p>
<p>There are a number of choices to make. These are the ones I selected:</p>
<ul>
<li>Image: Ubuntu 18.04 x64</li>
<li>Size: 1 GB Memory 25GB SSD $5/month</li>
<li>Datacenter: San Fransisco 2</li>
<li>Add your SSH keys: New SSH Key</li>
<li>Finalize: 1 Droplet, Hostname: jupyterhub-engr114</li>
</ul>
<p><img alt="Digital Droplet Choices" src="../images/digital_ocean_create_droplets_choices.png" /></p>
<p><img alt="Digital Droplet Choices" src="../images/digital_ocean_droplet_size_choices.png" /></p>
<p><img alt="Digital Droplet Choices" src="../images/digital_ocean_droplet_data_center_choices.png" /></p>
<p><img alt="Digital Droplet Choices" src="../images/digital_ocean_droplet_ssh_key__choices.png" /></p>
<h2 id="add-an-ssh-key">Add an SSH Key</h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Important!</strong> You need to add the public SSH key BEFORE creating the droplet</p>
</div>
<p>The public SSH key we created needs to be shown on the list of keys and the radio box beside it needs to be checked. If the SSH key isn't listed or the SSH key box left  unchecked, the SSH key will not be added to the server when the server is first created (and then we won't be able to log in with PuTTY). We need to add our public SSH key and check the key box so we can log onto the server with PuTTY.</p>
<p>Under [Add your SSH keys], click [New SSH Key]. A dialog window pops up:</p>
<p><img alt="Digital Droplet Choices" src="../images/digital_ocean_droplet_new_ssh_key_dialog.png" /></p>
<p>Paste the contents of the public SSH key into the [New SSH Key] dialog box.</p>
<p><img alt="Putty in Windows Start Menu" src="../images/digital_ocean_droplet_enter_ssh_key__details.png" /></p>
<p>Enter a name for the SSH key that will be saved on Digital Ocean. I choose the name <code>jupyter-hub-ssh-key</code>. Then click [Add SSH Key]</p>
<p><img alt="Putty in Windows Start Menu" src="../images/digital_ocean_droplet_ssh_key_name_and_add.png" /></p>
<p>Then you should see the new SSH Key in the [Add your SSH Keys?] region of the new droplets page. Make sure that the radio box for the SSH key we just added is checked. </p>
<p>A problem I had when I set up my first <em>droplet</em> was that I did not have the SSH Key was radio button selected. Therefore, when the server was created, no SSH keys were installed. </p>
<p>It is <em>way easier</em> to insert SSH keys into the server when the server is created. It is <em>way harder</em> to add an SSH keys after the server is created.</p>
<p><img alt="Putty in Windows Start Menu" src="../images/digital_ocean_see_new_ssh_key.png" /></p>
<p>Click the long green [Create] button at the bottom of the page to create the Droplet.</p>
<p><img alt="Putty in Windows Start Menu" src="../images/digital_ocean_droplet_create.png" /></p>
<p>After Droplet creation, you end up at the Digital Ocean main dashboard. Our new Droplet can be seen under [Resources] --&gt; [Droplets].</p>
<p><img alt="Putty in Windows Start Menu" src="../images/digital_ocean_droplets_1.png" /></p>
<p>Note the IP address of the new droplet. We need to IP address to log into our server with PuTTY.</p>
<h2 id="log-into-the-server-as-root-over-ssh-using-putty">Log into the server as root over SSH using PuTTY.</h2>
<p>Open PuTTY from the Windows start menu. A couple other parameters need to be set before we log onto the server.</p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td>IP Address</td>
<td>IP of <em>droplet</em> ex: 168.97.14.19</td>
</tr>
<tr>
<td>Port</td>
<td>22</td>
</tr>
<tr>
<td>Connection --&gt; SSH --&gt; Auth --&gt; Private key file</td>
<td>private SSH key</td>
</tr>
<tr>
<td>Connection --&gt; Data --&gt; Auto-login username</td>
<td>root</td>
</tr>
</tbody>
</table>
<p><img alt="Putty in Windows Start Menu" src="../images/putty_in_start_menu.png" /></p>
<p>Under Connect --&gt; SSH --&gt; Auth --&gt; Private key file for authentication:, click [Browse]. </p>
<p><img alt="PuTTY Auth SSH private key" src="../images/putty_Auth_SSH_private_key.png" /></p>
<p>Navigate to the SSH private key. The private key ends in a <code>.ppk</code> extension. I had trouble finding the key when I first set up PuTTY. It turned out that when the key was saved in the <code>Programfiles\PuTTY</code> folder. The key was not visible in the Windows file browser because I don't have administrator permissions on my machine at work. I ended up having to create a new SSH key and save the new key in <code>Documents\ssh-key</code> (I can access <code>Documents\ssh-key</code> without administrator privaleges).</p>
<p><img alt="PuTTY browse to private SSH key" src="../images/putty_browse_private_ssh_key.png" /></p>
<p>Under Connection --&gt; Data --&gt; Auto-login username: <code>root</code></p>
<p><img alt="Putty login details" src="../images/putty_login_details.png" /></p>
<p>Back in [Sessions] (the top-most menu item or main page), add the IP address and Port = 22, click [Open]</p>
<p><img alt="Putty IP address and Port" src="../images/puTTY_IP_and_Port.png" /></p>
<p>This brings up a new window that is a terminal for our server:</p>
<p><img alt="PyTTY SSH window open" src="../images/putty_ssh_window_open.png" /></p>
<h2 id="create-a-non-root-sudo-user">Create a non-root sudo user</h2>
<p>Digital Ocean recommends that the servers are run by a non-root user that has sudo access. So after an update, the thing we'll do on our server is create a non-root sudo user. </p>
<p>First, let's make sure everything is up to date:</p>
<pre><code class="text">$ sudo apt-get update
$ sudo apt-get upgrade
</code></pre>

<p>I followed <a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart">this tutorial</a> at Digital Ocean to create a non-root sudo user.</p>
<p>Create the new user with the <code>adduser</code> command. I called my new user <code>peter</code>.</p>
<pre><code class="text">$ adduser &lt;username&gt;
</code></pre>

<p>Set a new password and confirm:</p>
<pre><code class="text">Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully
</code></pre>

<p>The user details can be skipped by pressing [Enter]. Then [Y] to complete the new user setup.</p>
<pre><code class="text">Changing the user information for username
Enter the new value, or press ENTER for the default
    Full Name []:
    Room Number []:
    Work Phone []:
    Home Phone []:
    Other []:
Is the information correct? [Y/n]
</code></pre>

<p>Now let's give our new user sudo privaleges:</p>
<pre><code class="text">$ usermod -aG sudo &lt;username&gt;
</code></pre>

<p>The new user account is created and the new user has sudo privalges. We can switch accounts and become the new user with:</p>
<pre><code class="text">$ sudo su - &lt;username&gt;
</code></pre>

<p>The new user should have <code>sudo</code> privileges. That means when acting as <code>&lt;username&gt;</code> we should be able to look in the <code>/root</code> directory.</p>
<pre><code class="text">$ sudo ls -la /root
</code></pre>

<p>If you can see the contents of <code>/root</code> then the new user is set up with sudo access.</p>
<p>To exit out of the the new sudo user, and get back to using the root profile, type <code>exit</code> at the prompt</p>
<pre><code class="text">$ exit
</code></pre>

<h2 id="add-ssh-keys-to-new-users-profile">Add SSH keys to new user's profile</h2>
<p>Before we log off, we need to add our SSH keys to our new user's profile on the server. The second time I set up JupyterHub, I had trouble logging in as the non-root user using PuTTY. I could log in as <code>root</code> just fine, but I couldn't log in as the newly created user <code>peter</code>.</p>
<p>When Digital Ocean created the server, the SSH keys (specified on the creation page) were added to the <code>root</code> profile. The new user <code>peter</code> didn't exist when the server was created. The only user on the server at creation time was <code>root</code>. Therefore, no SSH keys were added to the <code>peter</code> profile at server creation time- because the user <code>peter</code> didn't exist yet. </p>
<p>Since we want to log into our server as the new non-root user <code>peter</code>, we need to add the same SSH keys saved in the <code>root</code> profile to the <code>peter</code> profile. The SSH keys belong in a file located at <code>/home/peter/.ssh/authorized_keys</code>. </p>
<p>This little line will copy the ssh keys from the root profile to the new user's profile. The line comes from <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">this tutorial</a> by Digital Ocean.</p>
<pre><code class="text">$ rsync --archive --chown=peter:peter ~/.ssh /home/peter
</code></pre>

<p>Next, we need to open the ufw firewall to OpenSSH trafic. We we'll communicate with the server over SSH and need the firewall to allow this type of communication through.</p>
<pre><code class="text">$ ufw allow OpenSSH
$ ufw enable
$ ufw status
</code></pre>

<p>Now we can exit out of the <code>root</code> profile. This terminates the PuTTY session.</p>
<pre><code class="text">$ exit
</code></pre>

<h2 id="connect-to-the-server-as-the-non-root-sudo-user-using-putty">Connect to the server as the non-root sudo user using PuTTY</h2>
<p>Now that the non-root sudo user is set up and our ssh keys are in <code>/home/&lt;user&gt;/.ssh/authorized_keys/</code>, let's start a new PuTTY session and log into the server as the new user. </p>
<p>Like before, open PuTTY from the Windows Start menu and add the following settings, but this time the Auto-login user name is the name of our new non-root sudo user:</p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td>IP Address</td>
<td>IP of <em>droplet</em> ex: 168.97.14.19</td>
</tr>
<tr>
<td>Port</td>
<td>22</td>
</tr>
<tr>
<td>Connection --&gt; SSH --&gt; Auth --&gt; Private key file</td>
<td>private SSH key</td>
</tr>
<tr>
<td>Connection --&gt; Data --&gt; Auto-login username</td>
<td>peter</td>
</tr>
</tbody>
</table>
<p>I also saved the PuTTY session details at this point so that I wouldn't have to re-enter all of the parameters each time I want to log into the server. Enter a name into [Saved Sessions] and click [Save]. Once the parameters are saved in PuTTY, you can simply double-click the profile name to log into the server.</p>
<p><img alt="PuTTY save profile" src="../images/putty_save_session.PNG" /></p>
<p>Log into the server with Sessions --&gt; [Open]</p>
<p>You should see the Digital Ocean login screen again. Note the command prompt will have the new user's name before the <code>@</code> symbol. </p>
<p><img alt="server terminal as peter" src="../images/putty_ssh_window_open_as_peter.png" /></p>
<p>Check to see which directory you land in. It should be <code>/home/&lt;username&gt;</code></p>
<pre><code class="text">$ pwd
/home/&lt;username&gt;
</code></pre>

<p>We can see the non-root user's home directory. Let's make sure we can also see into the <code>root</code> user's home directory to ensure we have sudo privileges as the non-root user:</p>
<pre><code class="text">$ sudo ls -la /root
</code></pre>

<p>To log out of the server simply type <code>exit</code>. This command closes the PuTTY session.</p>
<pre><code class="text">$ exit
</code></pre>

<h2 id="next-steps">Next Steps</h2>
<p>The next step is to install <strong>Miniconda</strong>, create a virtual environment and install <strong>JupyterHub</strong>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../setup/" title="Set Up" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Set Up
              </span>
            </div>
          </a>
        
        
          <a href="../install_jupyterhub/" title="Install JupyterHub" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Install JupyterHub
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Peter D. Kazarinoff
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.5e60981f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>